jQuery(document).ready(function(t){function e(e){var n=e.$button.siblings(".api-validation-status"),a=t('input[name="freemkit_settings['+e.fieldName+']"]');if(a.length){e.$button.prop("disabled",!0),n.html('<span class="spinner is-active" style="float: none; margin: 0;"></span>');var i={action:e.action,nonce:FreemKitAdmin.nonce};i[e.fieldName]=a.val(),t.ajax({url:ajaxurl,type:"POST",data:i,success:function(t){t.success?n.html('<span style="color: green;">'+t.data.message+"</span>"):n.html('<span style="color: #a60000;">'+t.data.message+"</span>")},error:function(){n.html('<span style="color: #a60000;">'+FreemKitAdmin.strings.api_validation_error+"</span>")},complete:function(){e.$button.prop("disabled",!1)}})}else n.html('<span style="color: #a60000;">Field not found.</span>')}t(".validate-api-key").on("click",function(n){n.preventDefault(),e({fieldName:"kit_api_key",action:"freemkit_validate_api",$button:t(this)})}),t(".validate-api-secret").on("click",function(n){n.preventDefault(),e({fieldName:"kit_api_secret",action:"freemkit_validate_api_secret",$button:t(this)})}),t(".test-kit-connection").on("click",function(e){e.preventDefault();var n=t(this),a=n.siblings(".kit-connection-status");n.prop("disabled",!0),a.html('<span class="spinner is-active" style="float: none; margin: 0;"></span>'),t.ajax({url:ajaxurl,type:"POST",data:{action:"freemkit_test_kit_connection",nonce:FreemKitAdmin.nonce},success:function(t){t.success?a.html('<span style="color: green;">'+t.data.message+"</span>"):a.html('<span style="color: #a60000;">'+t.data.message+"</span>")},error:function(){a.html('<span style="color: #a60000;">'+FreemKitAdmin.strings.api_validation_error+"</span>")},complete:function(){n.prop("disabled",!1)}})})});