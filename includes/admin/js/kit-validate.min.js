jQuery(document).ready(function(n){function a(a){var t=a.$button.siblings(".api-validation-status"),e=n('input[name="glue_link_settings['+a.fieldName+']"]');if(e.length){a.$button.prop("disabled",!0),t.html('<span class="spinner is-active" style="float: none; margin: 0;"></span>');var i={action:a.action,nonce:GlueLinkAdmin.nonce};i[a.fieldName]=e.val(),n.ajax({url:ajaxurl,type:"POST",data:i,success:function(n){n.success?t.html('<span style="color: green;">'+n.data.message+"</span>"):t.html('<span style="color: #a60000;">'+n.data.message+"</span>")},error:function(){t.html('<span style="color: #a60000;">'+GlueLinkAdmin.strings.api_validation_error+"</span>")},complete:function(){a.$button.prop("disabled",!1)}})}else t.html('<span style="color: #a60000;">Field not found.</span>')}n(".validate-api-key").on("click",function(t){t.preventDefault(),a({fieldName:"kit_api_key",action:"glue_link_validate_api",$button:n(this)})}),n(".validate-api-secret").on("click",function(t){t.preventDefault(),a({fieldName:"kit_api_secret",action:"glue_link_validate_api_secret",$button:n(this)})}),n(".test-kit-connection").on("click",function(a){a.preventDefault();var t=n(this),e=t.siblings(".kit-connection-status");t.prop("disabled",!0),e.html('<span class="spinner is-active" style="float: none; margin: 0;"></span>'),n.ajax({url:ajaxurl,type:"POST",data:{action:"glue_link_test_kit_connection",nonce:GlueLinkAdmin.nonce},success:function(n){n.success?e.html('<span style="color: green;">'+n.data.message+"</span>"):e.html('<span style="color: #a60000;">'+n.data.message+"</span>")},error:function(){e.html('<span style="color: #a60000;">'+GlueLinkAdmin.strings.api_validation_error+"</span>")},complete:function(){t.prop("disabled",!1)}})})});